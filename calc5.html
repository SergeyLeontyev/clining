<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Document</title>
	<link rel="stylesheet" href="./assets/css/style.min.css" />
	<link rel="stylesheet" href="./assets/css/jquery.mCustomScrollbar.min.css" />
	<link rel="stylesheet" href="./assets/css/swiper-bundle.min.css" />
</head>

<body>
	<section class="calc">
		<div class="container">
			<div class="area area__calc-six">

				<div class="area__cards">
					<div class="cardWind">
						<div class="cardWind-img"><img src="/assets/img/calc/wind-1.svg" alt=""></div>
						<p>Одностворчатое</p>
						<div class="cardWind-num">
							<div id="del_one" class="ar_left"></div>
							<input type="number" data-number="100" min="0" max="99" value="0">
							<div id="add_one" class="ar_right"></div>
						</div>
					</div>
					<div class="cardWind">
						<div class="cardWind-img"><img src="/assets/img/calc/wind-2.svg" alt=""></div>
						<p>Двухстворчатое</p>
						<div class="cardWind-num">
							<div id="del_one" class="ar_left"></div>
							<input type="number" data-number="200" min="0" max="99" value="0">
							<div id="add_one" class="ar_right"></div>
						</div>
					</div>
					<div class="cardWind">
						<div class="cardWind-img"><img src="/assets/img/calc/wind-3.svg" alt=""></div>
						<p>Трехстворчатое</p>
						<div class="cardWind-num">
							<div id="del_one" class="ar_left"></div>
							<input type="number" data-number="300" min="0" max="99" value="0">
							<div id="add_one" class="ar_right"></div>
						</div>
					</div>
					<div class="cardWind">
						<div class="cardWind-img"><img src="/assets/img/calc/wind-4.svg" alt=""></div>
						<p> Балкон или лоджия</p>
						<div class="cardWind-num">
							<div id="del_one" class="ar_left"></div>
							<input type="number" data-number="400" min="0" max="99" value="0">
							<div id="add_one" class="ar_right"></div>
						</div>
					</div>
				</div>

				<div class="area__small-box">
					<p class="area__title">Выберите услугу</p>
					<div class="area__checked">
						<div class="checkbox">
							<input class="custom-checkbox" type="checkbox" id="1" name="1" data-add="0.3">
							<label for="1">Москитные сетки</label>
						</div>

						<div class="checkbox">
							<input class="custom-checkbox" type="checkbox" id="2" name="2" data-add="0.5">
							<label for="2">Жалюзи</label>
						</div>

						<div class="checkbox">
							<input class="custom-checkbox" type="checkbox" id="3" name="3" data-add="1">
							<label for="3">Окно+балконная дверь</label>
						</div>

					</div>

					<div class="area__score">
						<p>Итого</p>
						<div class="area__score-sum"><span>0</span> ₽</div>
					</div>
					<button class="btn btn-blue">Заказать уборку</button>
				</div>
			</div>
		</div>
		</div>
	</section>
</body>

<script>
	const coefficient = {
		cof_0: 100,
		cof_1: 200,
		cof_2: 300,
		cof_3: 400,
	}
	let areaPrice = document.querySelector('.area__score-sum span');
	let winds = document.querySelectorAll(".cardWind-num");
	let areaCheckedCheckbox = document.querySelectorAll(".area__checked .custom-checkbox");

	const getPrice = () => {
		let result = 0;
		winds.forEach((item, index) => {
			result = result + (Number(item.querySelector('input').value) * coefficient[`cof_${index}`])
		})

		return result
	}

	winds.forEach((windItem, index) => {
		let inpValue = windItem.querySelector("input");
		let addOne = windItem.querySelector(".ar_right");
		let delOne = windItem.querySelector(".ar_left");

		addOne.addEventListener("click", () => {
			let result = Number(inpValue.value);
			inpValue.value = result + 1;
			areaPrice.innerHTML = getPrice()

		});

		delOne.addEventListener("click", () => {
			let result = Number(inpValue.value);
			if (result > 1) {
				inpValue.value = result - 1;
				areaPrice.innerHTML = getPrice()
			} else {
				inpValue.value = 0;
				areaPrice.innerHTML = getPrice()
			}
		});

		windItem.addEventListener('change', () => {
			areaPrice.innerHTML = getPrice()
		})
	});

	areaCheckedCheckbox.forEach(checkbox => {
		checkbox.addEventListener('change', (event) => {
			let target = event.target
			let percent = target.getAttribute('data-add')
			let totalPrice = Number(areaPrice.innerHTML)
			let additionalPrice = getPrice() * percent
			console.log(target.checked)
			if (target.checked) {
				areaPrice.innerHTML = totalPrice + additionalPrice
			} else {
				areaPrice.innerHTML = totalPrice - additionalPrice
			}
		})
	})

</script>

</html>